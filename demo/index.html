<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-BYNM7D886Q"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-BYNM7D886Q');
    </script>
    <title>Online Coding Classes For Kids & Teens | CodeLab</title>
    <link rel="icon" href="../images/logo.png">
    <!-- Meta Pixel Code -->
<script>
!function(f,b,e,v,n,t,s)
{if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};
if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];
s.parentNode.insertBefore(t,s)}(window, document,'script',
'https://connect.facebook.net/en_US/fbevents.js');
fbq('init', '2132928737159411');
fbq('track', 'PageView');
</script>
<noscript><img height="1" width="1" style="display:none"
src="https://www.facebook.com/tr?id=2132928737159411&ev=PageView&noscript=1"
/></noscript>
<!-- End Meta Pixel Code -->
</head>
<body>
    <!-- Calendly inline widget start -->
    <div class="calendly-inline-widget" data-url="https://calendly.com/codelabaratory/30min" style="width: 100%; height: 800px;"></div>
    
    <!-- External Calendly Widget Script -->
    <script type="text/javascript" src="https://assets.calendly.com/assets/external/widget.js" async></script>
    
    <!-- JavaScript to detect the event -->
    <script>
        
        window.addEventListener("load", function() {
            // Listen for the event that indicates a booking has been made
            window.addEventListener('message', function(event) {
                if (event.origin === 'https://calendly.com') {
                    const message = event.data;
                    
                    // When a booking has been scheduled
                    if (message.event && message.event === 'calendly.event_scheduled') {
                        console.log('Booking successfully made!', message);

        const eventSourceUrl = window.location.href;

        fetch('https://codelab-o3j2.onrender.com/lead', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({
          event_source_url: eventSourceUrl, // Send the current page URL
        }),
      })
      .then(response => response.json())
      .then(data => {
        console.log('Success:', data);
      })
      .catch(error => {
        console.error('Error:', error);
      });
                    }
                }
            });
        });
    </script>
    <!-- Calendly inline widget end -->
</body>
</html>
