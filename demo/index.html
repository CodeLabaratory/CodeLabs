<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-BYNM7D886Q"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-BYNM7D886Q');
    </script>
    <title>Online Coding Classes For Kids & Teens | CodeLab</title>
    <link rel="icon" href="../images/logo.png">
</head>
<body>
    <!-- Calendly inline widget start -->
    <div class="calendly-inline-widget" data-url="https://calendly.com/codelabaratory/30min" style="width: 100%; height: 800px;"></div>
    
    <!-- External Calendly Widget Script -->
    <script type="text/javascript" src="https://assets.calendly.com/assets/external/widget.js" async></script>
    
    <!-- JavaScript to detect the event -->
    <script>
        
        window.addEventListener("load", function() {
            // Listen for the event that indicates a booking has been made
            window.addEventListener('message', function(event) {
                if (event.origin === 'https://calendly.com') {
                    const message = event.data;
                    
                    // When a booking has been scheduled
                    if (message.event && message.event === 'calendly.event_scheduled') {
                        console.log('Booking successfully made!', message);

        const eventSourceUrl = window.location.href;

        fetch('https://codelab-o3j2.onrender.com/lead', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({
          event_source_url: eventSourceUrl, // Send the current page URL
        }),
      })
      .then(response => response.json())
      .then(data => {
        console.log('Success:', data);
      })
      .catch(error => {
        console.error('Error:', error);
      });
                    }
                }
            });
        });
    </script>
    <!-- Calendly inline widget end -->
</body>
</html>
